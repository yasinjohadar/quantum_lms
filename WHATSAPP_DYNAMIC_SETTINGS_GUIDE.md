# ุฏููู ุงูุฅุนุฏุงุฏุงุช ุงูุฏููุงููููุฉ ูู WhatsApp

## โ ุชู ุชุญุฏูุซ ุงููุธุงู

ุชู ุชุญุฏูุซ ุงููุธุงู ููุฏุนู ุฌููุน ุงููุชุบูุฑุงุช ุจุดูู ุฏููุงูููู ูู ุฎูุงู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ูู ููุญุฉ ุงูุชุญูู.

---

## ๐ ุงูุญููู ุงููุชุงุญุฉ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช

ุฌููุน ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ูููู ุชุนุฏูููุง ูู ุตูุญุฉ `/admin/whatsapp-settings`:

### 1. ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ
- โ **ุชูุนูู WhatsApp** (whatsapp_enabled) - checkbox
- โ **ุฅุตุฏุงุฑ API** (api_version) - text input
- โ **Phone Number ID** (phone_number_id) - text input (ูุทููุจ)
- โ **WABA ID** (waba_id) - text input (ุงุฎุชูุงุฑู)

### 2. ูุนูููุงุช ุงููุตุงุฏูุฉ
- โ **Access Token** (access_token) - password input (ูุดูุฑ ูู DB)
- โ **Verify Token** (verify_token) - text input (ูุทููุจ)
- โ **App Secret** (app_secret) - password input (ูุดูุฑ ูู DB)

### 3. ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ
- โ **Webhook Path** (webhook_path) - text input (ุฌุฏูุฏ)
- โ **Timeout** (timeout) - number input (ุฌุฏูุฏ)
- โ **Default From** (default_from) - text input (ุฌุฏูุฏ)
- โ **Strict Signature** (strict_signature) - checkbox
- โ **Auto Reply** (auto_reply) - checkbox
- โ **Auto Reply Message** (auto_reply_message) - textarea

---

## ๐ ููููุฉ ุนูู ุงููุธุงู

1. **ุงูุชุฎุฒูู:**
   - ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุชูุฎุฒู ูู ุฌุฏูู `system_settings` ูุน group = 'whatsapp'
   - ุงูุญููู ุงูุญุณุงุณุฉ (access_token, app_secret) ูุชู ุชุดููุฑูุง ูุจู ุงูุชุฎุฒูู

2. **ุงููุฑุงุกุฉ:**
   - `WhatsAppSettingsService` ููุฑุฃ ุงูุฅุนุฏุงุฏุงุช ูู Database
   - ุฅุฐุง ูู ุชูู ููุฌูุฏุฉุ ูุณุชุฎุฏู ุงูููู ุงูุงูุชุฑุงุถูุฉ ูู `config/whatsapp.php`

3. **ุงูุงุณุชุฎุฏุงู:**
   - Controllers ุชุณุชุฎุฏู `WhatsAppSettingsService` ููุญุตูู ุนูู ุงูุฅุนุฏุงุฏุงุช
   - Services ุงูุฃุฎุฑู ุชุณุชุฎุฏู `config()` ูููู ูููู ุชุญุฏูุซูุง ูุงุณุชุฎุฏุงู SystemSetting

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### ุงูุฅุนุฏุงุฏุงุช ุงููุฎุฒูุฉ ูู Database vs .env

**ุงูุญุงูุฉ ุงูุญุงููุฉ:**
- ุงูุฅุนุฏุงุฏุงุช ุชูุฎุฒู ูู Database (SystemSetting)
- ููู `WhatsAppClient` ูุณุชุฎุฏู `config()` ูุจุงุดุฑุฉ
- ูุฐุง ูุนูู ุฃู ุงูุชุบููุฑุงุช ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ูุฏ ูุง ุชุคุซุฑ ุนูู `WhatsAppClient` ูุจุงุดุฑุฉ

**ุงูุญู:**
- ุงูุฎูุงุฑ 1: ุงุณุชุฎุฏุงู `WhatsAppSettingsService` ูู `WhatsAppClient`
- ุงูุฎูุงุฑ 2: ุชุญุฏูุซ config cache ุจุนุฏ ุญูุธ ุงูุฅุนุฏุงุฏุงุช (ุงูุฃูุถู ููุชุทููุฑ)

### ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ

ููููู ุงูุขู:
1. ูุชุญ `/admin/whatsapp-settings`
2. ุฅุฏุฎุงู ุฌููุน ุงูุฅุนุฏุงุฏุงุช
3. ุญูุธูุง
4. ุณุชูุฎุฒู ูู Database

---

## ๐ง ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑู)

ุฅุฐุง ุฃุฑุฏุช ุฃู ุชุคุซุฑ ุงูุฅุนุฏุงุฏุงุช ูู Database ุนูู `WhatsAppClient` ูุจุงุดุฑุฉ:

1. ุชุญุฏูุซ `WhatsAppClient` ูููุจู settings ููุนุงูู
2. ุฃู ุชุญุฏูุซ `config/whatsapp.php` ููุฑุงุกุฉ ูู SystemSetting
3. ุฃู ุชุญุฏูุซ config cache ุจุนุฏ ูู ุญูุธ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-01

